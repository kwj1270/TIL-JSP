필수 이해 요소 정리
=======================
# 1.   
간단한 개요로 웹 서버가 웹 브라우저와 동작하기 위해서 **서블릿** 이 존재해야 한다.    
  
![JSP 처리 과정](https://user-images.githubusercontent.com/50267433/63404231-5626f480-c41d-11e9-8ffe-0d18b140cb86.jpg)
WAS(톰캣)는 JSP 페이지에 대한 요청이 들어오면 위 그림과 같이 처리를 한다.    
  
* JSP에 해당하는 서블릿이 존재하지 않을 경우. (과정1.1)  
  -JSP 페이지로부터 자바 코드를 생성한다. (과정1.2)  
  -자바 코드를 컴파일해서 서블릿 클래스를 생성한다. (과정1.3)  
  -서블릿에 클라이언트 요청을 전달한다. (과정2.1)  
  -서블릿이 요청을 처리한 결과를 응답으로 생성한다. (과정2.2)  
  -응답을 웹 브라우저에 전송한다. (과정3)   
* JSP에 해당하는 서블릿이 존재하는 경우(즉,이미 1.1~1.3 을 거친 경우)  
  -서블릿에 클라이언트 요청을 전달한다. (과정2.1)   
  -서블릿이 요청을 처리한 결과를 응답으로 생성한다. (과정2.2)      
  -응답을 웹 브라우저에 전송한다. (과정3)     
             
즉, JSP 페이지를 요청할 때에는 JSP를 직접 실행한는 것이 아니라,       
JSP를 자바 소스코드로 변환한 뒤 컴파일해서 생성한 서블릿을 실행하는 것이다.   

# 2.  
JSP 페이지는 출력 버퍼라고 불리는 곳에 임시로 응답 결과를 저장했다가 한 번에 웹 브라우저에 전송한다.  
   
* 데이터 전송 성능 향상  
* JSP 실행 도중에 버퍼를 비우고 새로운 내용 전송 가능  
* 버퍼가 다 차기 전까지 헤더 변경 가능   
      
page 디렉티브(```<% @page %> ```)는 ```buffer 속성```을 제공하고 있다.    
```buffer 속성```을 사용하면 JSP 페이지가 사용할 버퍼를 설정할 수 있다.    
```
<%@ page buffer="8KB"%>
```    
그러나 일반적으로 ```buffer 속성```을 지정하지 않는다.       
왜냐하면 **기본적으로 ```8KB```의 버퍼를 지원하도록 규정**이 되어있기 때문이다.  
  
그래서 주로 버퍼를 해제할 때만 ```buffer 속성```을 사용한다.  
```
<%@ page buffer="none" %>
```

# 3.
버퍼가 다 차면 JSP 페이지는 버퍼의 내용을 웹 브라우저에 전송한 후 버퍼를 비우고 새롭게 버퍼에 내용을 채우기 시작한다.     
이 때 버퍼에 보관된 응답 데이터를 전송하기 전에 응답 상태 코드와 응답 헤더를 먼저 전송한다.  
(따라서 이후에는 응답 헤더 값을 변경해도 웹 브라우저에 전송되지 않고 무시된다.)    
이러한 작업을 ```flush```라고 하며 ```page 디렉티브```에서는 이러한 동작을 설정하는 ```autoFlush 속성```이 존재한다.  

* autoFlush="true"  : 버퍼가 다 차면 버퍼를 플러시하고 계속 작업을 진행한다.       
* autoFlush="false" : 버퍼가 다 차면 익셉션을 발생시키고 작업을 중지한다.      

```
<%@ page autoFlush="true/false"%>
```    
# 4. 
서블릿/JSP 규약은 웹 어플리케이션이 특정 폴더 구조를 따르도록 제한하고 있다.
  
* WEB-INF : 웹 어플리케이션 설정 저보를 담고 있는 web.xml 파일이 위치한다.  
* WEB-INF\classes : 웹 어플리케이션에서 사용하는 클래스 파일이 위치한다.  
* WEB-INF\lib : 웹 어플리케이션에서 사용하는 jar 파일이 위치한다.  
  
# 5.
```localhost:8080/chap03```은 ```[톰캣]\webapps\chap03```을 의미하는 것이다. 

* ```[톰캣]\webapps\[웹경로]```  --->  ```http://host:port[/웹경로]```
  
그리고 여기서 말하는 [웹경로]를 **컨텍스트 경로**라고 한다.  
더욱 간단히 말하면 웹 어플리케이션을 나타내는 프로젝트 디렉토리가 **컨텍스트 경로**이다.    
  
톰캣의 ```webapps``` 폴더에는 ```ROOT```라는 특수 폴더가 존재하고 이 폴더는 루트 웹 어플리케이션을 위한 특수폴더이다.     
URL의 첫 번째 경로와 일치하는 컨텍스트 경로를 가진 웹 어플리케이션이 존재하지 않으면,      
루트 웹 어플리케이션이 요청을 처리한다.  
    
**예를 들어**  
``` 
http://localhost:8080/view/loginForm.jsp 라는 URL을 입력했다고 가정시
/view 컨택스트 경로로 갖는 웹 어플리케이션이 존재하지 않으면, 즉 webapps\view 폴더가 존재하지 않으면, 
루트 웹 어플리케이션 폴더인 ROOT를 기준으로 /view/loginForm.jsp 파일을 찾는다.

즉 webapps\ROOT\view\loginForm.jsp 파일을 찾아 실행한다.  
```
하지만 이렇게 사용할 경우 기존에는 컨택스트 경로가 존재하지 않는다고 했으니    
컨택스트 경로를 구하고자 한다면 ```""``` 빈 문자열이 반환된다.     
```
request.getContextPath();
```
참고로 컨택스트 경로를 구하는 방법은 ```request.getContextPath()```이다.  

# 6.
```war```는 ```Web Application Archive```의 약자로 웹 어플리케이션의 구성요소를 하나로 묶어 놓은 파일이다.       
```war```파일로 묶으려면 ```JDK의 jar 명령어```를 사용하면 된다.        
```
C:\apache-tomcat-8.0.21\webapps\chap04> jar cvf chap04.war *
                                  
c : 새로운 파일을 생성함
v : 세부 정보를 콘솔에 표시함
f : 생성할 파일의 이름을 지정함

그리고 옵션뒤의 이름("chap04.war"을 의미)은 생성할 파일 이름 
* 은 현재 폴더(디렉토리)의 모든 파일과 하위 폴더가 대상임을 의미 즉, 전체를 의미
``` 
