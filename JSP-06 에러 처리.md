에러 처리
=======================
# 1. 익셉션 직접 처리하기
기존 페이지가 동작중에 에러가 발생하면 웹 컨테이너가 생성한 에러화면을 띄워준다
[사진]
개발 과정에서는 이러한 에러 화면에 표시된 에러 내용을 보고 어떤 에러가 발생했는지 알 수 있어서
에러 화면을 보는 것이 도움이 된다.  
  
하지만 클라이언트의 입장에서 이러한 에러화면을 접했을 경우 해당 사이트를 신뢰하지 않게 된다.  
또한, 코드의 일부가 노출되기 때문에 보안 측면에서도 좋지 않다.  
  
그래서 개발자가 직접 에러에대한 처리를 하던가 에러 페이지를 생성해서         
클라이언트들에게 전보다는 나은 에러 화면을 보여줄 수 있다.      
## 1.1. 에러 처리
자바에서는 ```Try...catch```로 에러를 처리한다.  
이를 JSP 에서 그대로 사용한다고 보면 된다.   
   
**예시**
```
<%@ page contentType="text.html; charset=utf-8" %>
<html>
<head><title>파라미터 출력</title></head>
<body>

name 파라미터 값:
<% try{ %>
<%=request.getParameter("name").toUpperCase(); %>
<% } catch(Exception ex){ %>
name 파라미터가 옳지 않습니다.
<% } %>
</body>
</html>
```
위 같은 방법은 익셉션이 발생하면 페이지의 응답 결과 중 일부만 변경해서 이를 출력하는 것이다.   
  
***
# 2. 에러페이지 지정하기
JSP는 실행 도중 익셉션이 발생할 때 지정한 JSP 페이지를 보여줄 수 잇는 기능을 제공하고 있다.    
익셉션이 발생하면 보여줄 JSP 페이지는 ```Page 디렉티브```의 ```errorPage 속성```을 사용해서 지정한다.   
```
<%@ page errorPage="경로" %>
```    
**에러 페이지 예시**
```
<%@ page contentType="text/html; charset=utf-8" %>
<%@ page errorPage="/error/viewErrorMessage.jsp" %>
<html>
<head><title>파라미터 출력</title></head>
<body>

  name 파라미터 값 : <%= request.getParameter("name").toUpperCase() %>

</body>
</html>
```
에러가 발생하면 자동으로 지정한 에러페이지를 출력한다.  

***
# 3. 에러 페이지 작성하기
에러 페이지를 지정하려면 혹은 알리려면 ```page 디렉티브```의 ```isErrorPage 속성```의 값을 ```true``` 로 주어야한다.  
  
**예시 1**
```
<%@ page contentType="text/html; charset=utf-8" %>
<%@ page isErrorPage="true" %>
<html>
<head><title>에러 발생</title></head>
<body>

요청 처리 과정에서 에러가 발생하였습니다. <br>
빠른 시간 내에 문제를 해결하도록 하겠습니다. 
<p>
에러 타입: <%= exception.getClass().getName() %> <br>
에러 메시지: <b><%= exception.getMessage() %> </b>
</body>
</html>
```
이로써 에러가 발생한다면 ```에러 발생``` JSP가 실행되고 이를 출력해서 보여준다.      
또한 어떤 에러가 발생했는지, 그리고 에러 메시지는 무엇인지도 화면에 나타내준다.   
     
하지만 웹 브라우저마다 에러 페이지를 출력하는 기준이 있는데,   
인터넷 익스플로러는    
   
* 응답의 상태 코드가 400, 404나 500등 에러코드이고,  
* 전체 응답 결과 데이터의 길이가 512바이트 보다 작을 대    
  
위와 같은 경우에는 서버에서 전송한 응답 화면이 아닌 자체적으로 제공하는 오류 메시지 화면을 출력한다.     
  
그렇기에 ```512바이트```를 넘겨주도록 JSP 페이지를 작성해 주어야 하는데 방법은 간단하다.  
화면에 표시하고 싶지 않게 크기를 늘리려면 **주석** 을 이용하면 된다.  
  
**예시 2**
```
<%@ page contentType="text/html; charset=utf-8" %>
<%@ page isErrorPage="true" %>
<html>
<head><title>에러 발생</title></head>
<body>

요청 처리 과정에서 에러가 발생하였습니다. <br>
빠른 시간 내에 문제를 해결하도록 하겠습니다. 
<p>
에러 타입: <%= exception.getClass().getName() %> <br>
에러 메시지: <b><%= exception.getMessage() %> </b>
<!-- 
만약 에러 페이지의 길이가 512바이트보다 작다면,
인터넷 익스플로러는 이 페이지가 출력하는 에러 페이지를 출력하지 않고 
자체적으로 제공하는 'HTTP 오류 메시지' 화면을 출력한다.
인터넷 익스플로러에서도 에러 페이지 내용을 올바르게 출력하려면
응답 결과에 이 주석과 같은 내용을 포함해서
에러 데이터가 512바이트를 넘도록 해야 한다.  
-->
</body>
</html>
```
이제 다시 에러를 발생시켜보고 확인해보면  
```512바이트```가 넘으니 현재 다시 작성한 에러페이지가 출력 될 것이다.   
